ç]
ZC:\Users\amruta\source\repos\AadharVerify\AadharVerify\Controllers\FinalUsersController.cs
	namespace 	
AadharVerify
 
. 
Controllers "
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class  
FinalUsersController %
:& '
ControllerBase( 6
{ 
private 
readonly 
UserDataDbContext *
_context+ 3
;3 4
private 
readonly 
IEmailService &
emailService' 3
;3 4
public  
FinalUsersController #
(# $
UserDataDbContext$ 5
context6 =
,= >
IEmailService? L
emailServiceM Y
)Y Z
{ 	
_context 
= 
context 
; 
this 
. 
emailService 
= 
emailService  ,
;, -
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
ActionResult &
<& '
IEnumerable' 2
<2 3
Users3 8
>8 9
>9 :
>: ;
GetUsersList< H
(H I
)I J
{   	
if""
 
("" 
_context"" 
."" 
	UsersList""  
==""! #
null""$ (
)""( )
{##
 
return$$ 
NotFound$$ 
($$ 
)$$ 
;$$  
}%%
 
return&& 
await&& 
_context&& !
.&&! "
	UsersList&&" +
.&&+ ,
ToListAsync&&, 7
(&&7 8
)&&8 9
;&&9 :
}'' 	
[** 	
HttpGet**	 
(** 
$str** 
)** 
]** 
public++ 
async++ 
Task++ 
<++ 
ActionResult++ &
<++& '
Users++' ,
>++, -
>++- .
GetUsers++/ 7
(++7 8
int++8 ;
id++< >
)++> ?
{,, 	
if--
 
(-- 
_context-- 
.-- 
	UsersList--  
==--! #
null--$ (
)--( )
{..
 
return// 
NotFound// 
(// 
)// 
;//  
}00
 
var11 
users11 
=11 
await11 
_context11 &
.11& '
	UsersList11' 0
.110 1
	FindAsync111 :
(11: ;
id11; =
)11= >
;11> ?
if33 
(33 
users33 
==33 
null33 
)33 
{44 
return55 
NotFound55 
(55  
)55  !
;55! "
}66 
return88 
users88 
;88 
}99 	
[== 	
HttpPut==	 
(== 
$str== 
)== 
]== 
public>> 
async>> 
Task>> 
<>> 
IActionResult>> '
>>>' (
PutUsers>>) 1
(>>1 2
int>>2 5
id>>6 8
,>>8 9
Users>>: ?
users>>@ E
)>>E F
{?? 	
if@@ 
(@@ 
id@@ 
!=@@ 
users@@ 
.@@ 
Id@@ 
)@@ 
{AA 
returnBB 

BadRequestBB !
(BB! "
)BB" #
;BB# $
}CC 
_contextEE 
.EE 
EntryEE 
(EE 
usersEE  
)EE  !
.EE! "
StateEE" '
=EE( )
EntityStateEE* 5
.EE5 6
ModifiedEE6 >
;EE> ?
tryGG 
{HH 
awaitII 
_contextII 
.II 
SaveChangesAsyncII /
(II/ 0
)II0 1
;II1 2
}JJ 
catchKK 
(KK (
DbUpdateConcurrencyExceptionKK /
)KK/ 0
{LL 
ifMM 
(MM 
!MM 
UsersExistsMM  
(MM  !
idMM! #
)MM# $
)MM$ %
{NN 
returnOO 
NotFoundOO #
(OO# $
)OO$ %
;OO% &
}PP 
elseQQ 
{RR 
throwSS 
;SS 
}TT 
}UU 
returnWW 
	NoContentWW 
(WW 
)WW 
;WW 
}XX 	
[\\ 	
HttpPost\\	 
]\\ 
public]] 
async]] 
Task]] 
<]] 
ActionResult]] &
<]]& '
Users]]' ,
>]], -
>]]- .
	PostUsers]]/ 8
(]]8 9
Users]]9 >
users]]? D
)]]D E
{^^ 	
if__
 
(__ 
_context__ 
.__ 
	UsersList__  
==__! #
null__$ (
)__( )
{``
 
returnaa 
Problemaa 
(aa 
$straa Q
)aaQ R
;aaR S
}cc 
usersdd 
.dd 
UserTypedd 
=dd 
$strdd #
;dd# $
_contextff 
.ff 
	UsersListff 
.ff 
Addff "
(ff" #
usersff# (
)ff( )
;ff) *
awaitgg 
_contextgg 
.gg 
SaveChangesAsyncgg +
(gg+ ,
)gg, -
;gg- .
returnii 
CreatedAtActionii "
(ii" #
$strii# -
,ii- .
newii/ 2
{ii3 4
idii5 7
=ii8 9
usersii: ?
.ii? @
Idii@ B
}iiC D
,iiD E
usersiiF K
)iiK L
;iiL M
}jj 	
[kk 	
HttpGetkk	 
(kk 
$strkk '
)kk' (
]kk( )
publicll 
IActionResultll 
CheckEmailExistsll -
(ll- .
stringll. 4
emailll5 :
)ll: ;
{mm 	
varnn 
existsnn 
=nn 
_contextnn !
.nn! "
	UsersListnn" +
.nn+ ,
Anynn, /
(nn/ 0
unn0 1
=>nn2 4
unn5 6
.nn6 7
Emailnn7 <
==nn= ?
emailnn@ E
)nnE F
;nnF G
ifpp 
(pp 
existspp 
)pp 
{qq 
returnrr 
Okrr 
(rr 
newrr 
{rr 
existsrr  &
=rr' (
truerr) -
,rr- .
messagerr/ 6
=rr7 8
$strrr9 T
}rrU V
)rrV W
;rrW X
}ss 
elsett 
{uu 
returnvv 
Okvv 
(vv 
newvv 
{vv 
existsvv  &
=vv' (
falsevv) .
,vv. /
messagevv0 7
=vv8 9
$strvv: L
}vvM N
)vvN O
;vvO P
}ww 
}xx 	
[|| 	

HttpDelete||	 
(|| 
$str|| 
)|| 
]|| 
public}} 
async}} 
Task}} 
<}} 
IActionResult}} '
>}}' (
DeleteUsers}}) 4
(}}4 5
int}}5 8
id}}9 ;
)}}; <
{~~ 	
if 
( 
_context 
. 
	UsersList "
==# %
null& *
)* +
{
ÄÄ 
return
ÅÅ 
NotFound
ÅÅ 
(
ÅÅ  
)
ÅÅ  !
;
ÅÅ! "
}
ÇÇ 
var
ÉÉ 
users
ÉÉ 
=
ÉÉ 
await
ÉÉ 
_context
ÉÉ &
.
ÉÉ& '
	UsersList
ÉÉ' 0
.
ÉÉ0 1
	FindAsync
ÉÉ1 :
(
ÉÉ: ;
id
ÉÉ; =
)
ÉÉ= >
;
ÉÉ> ?
if
ÑÑ 
(
ÑÑ 
users
ÑÑ 
==
ÑÑ 
null
ÑÑ 
)
ÑÑ 
{
ÖÖ 
return
ÜÜ 
NotFound
ÜÜ 
(
ÜÜ  
)
ÜÜ  !
;
ÜÜ! "
}
áá 
_context
ââ 
.
ââ 
	UsersList
ââ 
.
ââ 
Remove
ââ %
(
ââ% &
users
ââ& +
)
ââ+ ,
;
ââ, -
await
ää 
_context
ää 
.
ää 
SaveChangesAsync
ää +
(
ää+ ,
)
ää, -
;
ää- .
return
åå 
	NoContent
åå 
(
åå 
)
åå 
;
åå 
}
çç 	
[
èè 	
HttpPost
èè	 
(
èè 
$str
èè 
)
èè 
]
èè 
public
êê 
async
êê 
Task
êê 
<
êê 
IActionResult
êê '
>
êê' (
SendMail
êê) 1
(
êê1 2
[
êê2 3
FromBody
êê3 ;
]
êê; <
EmailVerifyDto
êê= K
emailVerifyDto
êêL Z
)
êêZ [
{
ëë 	
try
íí 
{
ìì 
Mailrequest
îî 
mailrequest
îî '
=
îî( )
new
îî* -
Mailrequest
îî. 9
(
îî9 :
)
îî: ;
;
îî; <
mailrequest
ïï 
.
ïï 
ToEmail
ïï #
=
ïï$ %
$str
ïï& ?
;
ïï? @
mailrequest
ññ 
.
ññ 
Subject
ññ #
=
ññ$ %
$str
ññ& ?
;
ññ? @
mailrequest
óó 
.
óó 
Body
óó  
=
óó! "
GetHtmlcontent
óó# 1
(
óó1 2
emailVerifyDto
óó2 @
)
óó@ A
;
óóA B
await
òò 
emailService
òò "
.
òò" #
SendEmailAsync
òò# 1
(
òò1 2
mailrequest
òò2 =
)
òò= >
;
òò> ?
return
ôô 
Ok
ôô 
(
ôô 
)
ôô 
;
ôô 
}
öö 
catch
õõ 
(
õõ 
	Exception
õõ 
ex
õõ 
)
õõ  
{
úú 
throw
ùù 
;
ùù 
}
ûû 
}
üü 	
private
°° 
string
°° 
GetHtmlcontent
°° %
(
°°% &
EmailVerifyDto
°°& 4
emailVerifyDto
°°5 C
)
°°C D
{
¢¢ 	
string
££ 
response
££ 
=
££ 
$str
££ t
;
££t u
response
§§ 
+=
§§ 
$str
§§ Q
;
§§Q R
response
¶¶ 
+=
¶¶ 
$str
¶¶ h
;
¶¶h i
response
ßß 
+=
ßß 
$str
ßß U
;
ßßU V
response
®® 
+=
®® 
$str®® ©
;®®© ™
response
©© 
+=
©© 
$str
©© j
;
©©j k
response
™™ 
+=
™™ 
$"
™™ 
$str
™™ 3
{
™™3 4
emailVerifyDto
™™4 B
.
™™B C
Otp
™™C F
}
™™F G
$str
™™G R
"
™™R S
;
™™S T
response
´´ 
+=
´´ 
$str
´´  
;
´´  !
return
¨¨ 
response
¨¨ 
;
¨¨ 
}
≠≠ 	
private
ØØ 
bool
ØØ 
UsersExists
ØØ  
(
ØØ  !
int
ØØ! $
id
ØØ% '
)
ØØ' (
{
∞∞ 	
return
±± 
(
±± 
_context
±± 
.
±± 
	UsersList
±± &
?
±±& '
.
±±' (
Any
±±( +
(
±±+ ,
e
±±, -
=>
±±. 0
e
±±1 2
.
±±2 3
Id
±±3 5
==
±±6 8
id
±±9 ;
)
±±; <
)
±±< =
.
±±= >
GetValueOrDefault
±±> O
(
±±O P
)
±±P Q
;
±±Q R
}
≤≤ 	
}
≥≥ 
}¥¥ Œ(
[C:\Users\amruta\source\repos\AadharVerify\AadharVerify\Controllers\GoogleProxyController.cs
[ 
Route 
( 
$str 
) 
] 
[ 
ApiController 
] 
public		 
class		 &
GoogleDriveProxyController		 '
:		( )
ControllerBase		* 8
{

 
private 
readonly 
IHttpClientFactory '
_httpClientFactory( :
;: ;
public 
&
GoogleDriveProxyController %
(% &
IHttpClientFactory& 8
httpClientFactory9 J
)J K
{ 
_httpClientFactory 
= 
httpClientFactory .
;. /
} 
[ 
HttpGet 
] 
public 

async 
Task 
< 
IActionResult #
># $
GetImage% -
(- .
[. /
	FromQuery/ 8
]8 9
string: @
fileNameA I
)I J
{ 
try 
{ 	
var 
apiKey 
= 
$str B
;B C
var 
query 
= 
$" 
$str  
{  !
fileName! )
}) *
$str* ^
"^ _
;_ `
var 
apiUrl 
= 
$" 
$str I
{I J
apiKeyJ P
}P Q
$strQ T
{T U
queryU Z
}Z [
"[ \
;\ ]
using 
( 
var 

httpClient !
=" #
_httpClientFactory$ 6
.6 7
CreateClient7 C
(C D
)D E
)E F
{ 
var 
response 
= 
await $

httpClient% /
./ 0
GetAsync0 8
(8 9
apiUrl9 ?
)? @
;@ A
response 
. #
EnsureSuccessStatusCode 0
(0 1
)1 2
;2 3
var   
fileResponse    
=  ! "
await  # (
response  ) 1
.  1 2
Content  2 9
.  9 :
ReadFromJsonAsync  : K
<  K L#
GoogleDriveFileResponse  L c
>  c d
(  d e
)  e f
;  f g
if"" 
("" 
fileResponse""  
?""  !
.""! "
Files""" '
!=""( *
null""+ /
&&""0 2
fileResponse""3 ?
.""? @
Files""@ E
.""E F
Count""F K
>""L M
$num""N O
)""O P
{## 
var$$ 
fileId$$ 
=$$  
fileResponse$$! -
.$$- .
Files$$. 3
[$$3 4
$num$$4 5
]$$5 6
.$$6 7
Id$$7 9
;$$9 :
var%% 
imageUrl%%  
=%%! "
$"%%# %
$str%%% D
{%%D E
fileId%%E K
}%%K L
$str%%L \
"%%\ ]
;%%] ^
var'' 
imageResponse'' %
=''& '
await''( -

httpClient''. 8
.''8 9
GetAsync''9 A
(''A B
imageUrl''B J
)''J K
;''K L
imageResponse(( !
.((! "#
EnsureSuccessStatusCode((" 9
(((9 :
)((: ;
;((; <
var** 
stream** 
=**  
await**! &
imageResponse**' 4
.**4 5
Content**5 <
.**< =
ReadAsStreamAsync**= N
(**N O
)**O P
;**P Q
return++ 
new++ 
FileStreamResult++ /
(++/ 0
stream++0 6
,++6 7
imageResponse++8 E
.++E F
Content++F M
.++M N
Headers++N U
.++U V
ContentType++V a
?++a b
.++b c
ToString++c k
(++k l
)++l m
??++n p
$str	++q ã
)
++ã å
;
++å ç
},, 
}-- 
return// 
NotFound// 
(// 
)// 
;// 
}00 	
catch11 
(11  
HttpRequestException11 #
ex11$ &
)11& '
{22 	
return44 

BadRequest44 
(44 
$"44  
$str44  '
{44' (
ex44( *
.44* +
Message44+ 2
}442 3
"443 4
)444 5
;445 6
}55 	
}66 
}77 
public99 
class99 #
GoogleDriveFileResponse99 $
{:: 
public;; 

List;; 
<;; 
GoogleDriveFile;; 
>;;  
Files;;! &
{;;' (
get;;) ,
;;;, -
set;;. 1
;;;1 2
};;3 4
}<< 
public>> 
class>> 
GoogleDriveFile>> 
{?? 
public@@ 

string@@ 
Id@@ 
{@@ 
get@@ 
;@@ 
set@@ 
;@@  
}@@! "
}BB å7
SC:\Users\amruta\source\repos\AadharVerify\AadharVerify\Controllers\OtpController.cs
	namespace 	
AadharVerify
 
. 
Controllers "
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
OtpController 
:  
ControllerBase! /
{ 
private 
readonly 
UserDataDbContext *
_context+ 3
;3 4
private 
readonly 

OtpService #
_otpService$ /
;/ 0
public 
OtpController 
( 
UserDataDbContext .
context/ 6
,6 7

OtpService8 B

otpServiceC M
)M N
{ 	
_context 
= 
context 
; 
_otpService 
= 

otpService $
??% '
throw( -
new. 1!
ArgumentNullException2 G
(G H
nameofH N
(N O

otpServiceO Y
)Y Z
)Z [
;[ \
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
ActionResult &
<& '
IEnumerable' 2
<2 3
Phone3 8
>8 9
>9 :
>: ;
GetPhonenumber< J
(J K
)K L
{ 	
if 
( 
_context 
. 
Phonenumber $
==% '
null( ,
), -
{ 
return   
NotFound   
(    
)    !
;  ! "
}!! 
return"" 
await"" 
_context"" !
.""! "
Phonenumber""" -
.""- .
ToListAsync"". 9
(""9 :
)"": ;
;""; <
}## 	
[&& 	
HttpGet&&	 
(&& 
$str&& 
)&& 
]&& 
public'' 
async'' 
Task'' 
<'' 
ActionResult'' &
<''& '
Phone''' ,
>'', -
>''- .
GetPhone''/ 7
(''7 8
int''8 ;
id''< >
)''> ?
{(( 	
if)) 
()) 
_context)) 
.)) 
Phonenumber)) $
==))% '
null))( ,
))), -
{** 
return++ 
NotFound++ 
(++  
)++  !
;++! "
},, 
var-- 
phone-- 
=-- 
await-- 
_context-- &
.--& '
Phonenumber--' 2
.--2 3
	FindAsync--3 <
(--< =
id--= ?
)--? @
;--@ A
if// 
(// 
phone// 
==// 
null// 
)// 
{00 
return11 
NotFound11 
(11  
)11  !
;11! "
}22 
return44 
phone44 
;44 
}55 	
[77 	
HttpPost77	 
]77 
[88 	
Route88	 
(88 
$str88 !
)88! "
]88" #
public99 
IActionResult99 
GenerateOtp99 (
(99( )
[99) *
FromBody99* 2
]992 3
Phone994 9
phone99: ?
)99? @
{:: 	
if;; 
(;; 
!;; 

ModelState;; 
.;; 
IsValid;; #
);;# $
{<< 
return== 

BadRequest== !
(==! "
$str==" 3
)==3 4
;==4 5
}>> 
try@@ 
{AA 
stringCC 
generatedOtpCC #
=CC$ %
_otpServiceCC& 1
.CC1 2
GenerateOtpCC2 =
(CC= >
phoneCC> C
.CCC D
PhoneNumberCCD O
)CCO P
;CCP Q
phoneFF 
.FF 
OTPFF 
=FF 
generatedOtpFF (
;FF( )
_otpServiceII 
.II 
SaveOtpRecordII )
(II) *
phoneII* /
)II/ 0
;II0 1
returnKK 
OkKK 
(KK 
newKK 
{KK 
MessageKK  '
=KK( )
$strKK* F
,KKF G
OtpKKH K
=KKL M
generatedOtpKKN Z
}KK[ \
)KK\ ]
;KK] ^
}LL 
catchMM 
(MM 
	ExceptionMM 
exMM 
)MM  
{NN 
returnOO 

StatusCodeOO !
(OO! "
$numOO" %
,OO% &
newOO' *
{OO+ ,
MessageOO- 4
=OO5 6
$strOO7 N
,OON O
ErrorOOP U
=OOV W
exOOX Z
.OOZ [
MessageOO[ b
}OOc d
)OOd e
;OOe f
}PP 
}QQ 	
[SS 	
HttpPostSS	 
]SS 
[TT 	
RouteTT	 
(TT 
$strTT 
)TT  
]TT  !
publicUU 
IActionResultUU 
	VerifyOtpUU &
(UU& '
[UU' (
FromBodyUU( 0
]UU0 1"
OtpVerificationRequestUU2 H"
otpVerificationRequestUUI _
)UU_ `
{VV 	
ifWW 
(WW 
!WW 

ModelStateWW 
.WW 
IsValidWW #
)WW# $
{XX 
returnYY 

BadRequestYY !
(YY! "

ModelStateYY" ,
)YY, -
;YY- .
}ZZ 
try\\ 
{]] 
bool^^ 

isOtpValid^^ 
=^^  !
_otpService^^" -
.^^- .
	VerifyOtp^^. 7
(^^7 8"
otpVerificationRequest^^8 N
.^^N O
PhoneNumber^^O Z
,^^Z ["
otpVerificationRequest^^\ r
.^^r s
Otp^^s v
)^^v w
;^^w x
if`` 
(`` 

isOtpValid`` 
)`` 
{aa 
returncc 
Okcc 
(cc 
newcc !
{cc" #
Messagecc$ +
=cc, -
$strcc. I
}ccJ K
)ccK L
;ccL M
}dd 
elseee 
{ff 
returngg 

BadRequestgg %
(gg% &
newgg& )
{gg* +
Messagegg, 3
=gg4 5
$strgg6 C
}ggD E
)ggE F
;ggF G
}hh 
}ii 
catchjj 
(jj 
	Exceptionjj 
exjj 
)jj  
{kk 
returnll 

StatusCodell !
(ll! "
$numll" %
,ll% &
newll' *
{ll+ ,
Messagell- 4
=ll5 6
$strll7 N
,llN O
ErrorllP U
=llV W
exllX Z
.llZ [
Messagell[ b
}llc d
)lld e
;lle f
}mm 
}nn 	
}oo 
}pp å[
VC:\Users\amruta\source\repos\AadharVerify\AadharVerify\Controllers\PhonesController.cs
	namespace 	
AadharVerify
 
. 
Controllers "
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
PhonesController !
:" #
ControllerBase$ 2
{ 
private 
readonly 
UserDataDbContext *
_context+ 3
;3 4
public 
PhonesController 
(  
UserDataDbContext  1
context2 9
)9 :
{ 	
_context 
= 
context 
; 
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
ActionResult &
<& '
IEnumerable' 2
<2 3
Phone3 8
>8 9
>9 :
>: ;
GetPhonenumber< J
(J K
)K L
{ 	
if
 
( 
_context 
. 
Phonenumber "
==# %
null& *
)* +
{
 
return 
NotFound 
( 
) 
;  
}
 
return   
await   
_context   !
.  ! "
Phonenumber  " -
.  - .
ToListAsync  . 9
(  9 :
)  : ;
;  ; <
}!! 	
[$$ 	
HttpGet$$	 
($$ 
$str$$ 
)$$ 
]$$ 
public%% 
async%% 
Task%% 
<%% 
ActionResult%% &
<%%& '
Phone%%' ,
>%%, -
>%%- .
GetPhone%%/ 7
(%%7 8
int%%8 ;
id%%< >
)%%> ?
{&& 	
if''
 
('' 
_context'' 
.'' 
Phonenumber'' "
==''# %
null''& *
)''* +
{((
 
return)) 
NotFound)) 
()) 
))) 
;))  
}**
 
var++ 
phone++ 
=++ 
await++ 
_context++ &
.++& '
Phonenumber++' 2
.++2 3
	FindAsync++3 <
(++< =
id++= ?
)++? @
;++@ A
if-- 
(-- 
phone-- 
==-- 
null-- 
)-- 
{.. 
return// 
NotFound// 
(//  
)//  !
;//! "
}00 
return22 
phone22 
;22 
}33 	
[77 	
HttpPut77	 
(77 
$str77 
)77 
]77 
public88 
async88 
Task88 
<88 
IActionResult88 '
>88' (
PutPhone88) 1
(881 2
int882 5
id886 8
,888 9
Phone88: ?
phone88@ E
)88E F
{99 	
if:: 
(:: 
id:: 
!=:: 
phone:: 
.:: 
Id:: 
):: 
{;; 
return<< 

BadRequest<< !
(<<! "
)<<" #
;<<# $
}== 
_context?? 
.?? 
Entry?? 
(?? 
phone??  
)??  !
.??! "
State??" '
=??( )
EntityState??* 5
.??5 6
Modified??6 >
;??> ?
tryAA 
{BB 
awaitCC 
_contextCC 
.CC 
SaveChangesAsyncCC /
(CC/ 0
)CC0 1
;CC1 2
}DD 
catchEE 
(EE (
DbUpdateConcurrencyExceptionEE /
)EE/ 0
{FF 
ifGG 
(GG 
!GG 
PhoneExistsGG  
(GG  !
idGG! #
)GG# $
)GG$ %
{HH 
returnII 
NotFoundII #
(II# $
)II$ %
;II% &
}JJ 
elseKK 
{LL 
throwMM 
;MM 
}NN 
}OO 
returnQQ 
	NoContentQQ 
(QQ 
)QQ 
;QQ 
}RR 	
[VV 	
HttpPostVV	 
]VV 
publicWW 
asyncWW 
TaskWW 
<WW 
ActionResultWW &
<WW& '
PhoneWW' ,
>WW, -
>WW- .
	PostPhoneWW/ 8
(WW8 9
PhoneWW9 >
phoneWW? D
)WWD E
{XX 	
ifYY
 
(YY 
_contextYY 
.YY 
PhonenumberYY "
==YY# %
nullYY& *
)YY* +
{ZZ
 
return[[ 
Problem[[ 
([[ 
$str[[ S
)[[S T
;[[T U
}\\
 
_context]] 
.]] 
Phonenumber]]  
.]]  !
Add]]! $
(]]$ %
phone]]% *
)]]* +
;]]+ ,
await^^ 
_context^^ 
.^^ 
SaveChangesAsync^^ +
(^^+ ,
)^^, -
;^^- .
return`` 
CreatedAtAction`` "
(``" #
$str``# -
,``- .
new``/ 2
{``3 4
id``5 7
=``8 9
phone``: ?
.``? @
Id``@ B
}``C D
,``D E
phone``F K
)``K L
;``L M
}aa 	
[dd 	

HttpDeletedd	 
(dd 
$strdd 
)dd 
]dd 
publicee 
asyncee 
Taskee 
<ee 
IActionResultee '
>ee' (
DeletePhoneee) 4
(ee4 5
intee5 8
idee9 ;
)ee; <
{ff 	
ifgg 
(gg 
_contextgg 
.gg 
Phonenumbergg $
==gg% '
nullgg( ,
)gg, -
{hh 
returnii 
NotFoundii 
(ii  
)ii  !
;ii! "
}jj 
varkk 
phonekk 
=kk 
awaitkk 
_contextkk &
.kk& '
Phonenumberkk' 2
.kk2 3
	FindAsynckk3 <
(kk< =
idkk= ?
)kk? @
;kk@ A
ifll 
(ll 
phonell 
==ll 
nullll 
)ll 
{mm 
returnnn 
NotFoundnn 
(nn  
)nn  !
;nn! "
}oo 
_contextqq 
.qq 
Phonenumberqq  
.qq  !
Removeqq! '
(qq' (
phoneqq( -
)qq- .
;qq. /
awaitrr 
_contextrr 
.rr 
SaveChangesAsyncrr +
(rr+ ,
)rr, -
;rr- .
returntt 
	NoContenttt 
(tt 
)tt 
;tt 
}uu 	
privateww 
boolww 
PhoneExistsww  
(ww  !
intww! $
idww% '
)ww' (
{xx 	
returnyy 
(yy 
_contextyy 
.yy 
Phonenumberyy (
?yy( )
.yy) *
Anyyy* -
(yy- .
eyy. /
=>yy0 2
eyy3 4
.yy4 5
Idyy5 7
==yy8 :
idyy; =
)yy= >
)yy> ?
.yy? @
GetValueOrDefaultyy@ Q
(yyQ R
)yyR S
;yyS T
}zz 	
[{{ 	
HttpPost{{	 
({{ 
$str{{ 
){{ 
]{{ 
public|| 
async|| 
Task|| 
<|| 
IActionResult|| '
>||' (
	VerifyOTP||) 2
(||2 3
[||3 4
FromBody||4 <
]||< =
Phone||> C
request||D K
)||K L
{}} 	
if 
( 
string 
. 
IsNullOrEmpty $
($ %
request% ,
., -
PhoneNumber- 8
)8 9
||: <
string= C
.C D
IsNullOrEmptyD Q
(Q R
requestR Y
.Y Z
OTPZ ]
)] ^
)^ _
{
ÄÄ 
return
ÅÅ 

BadRequest
ÅÅ !
(
ÅÅ! "
$str
ÅÅ" F
)
ÅÅF G
;
ÅÅG H
}
ÇÇ 
var
ÖÖ 
phone
ÖÖ 
=
ÖÖ 
await
ÖÖ 
_context
ÖÖ &
.
ÖÖ& '
Phonenumber
ÖÖ' 2
.
ÖÖ2 3!
FirstOrDefaultAsync
ÖÖ3 F
(
ÖÖF G
p
ÖÖG H
=>
ÖÖI K
p
ÖÖL M
.
ÖÖM N
PhoneNumber
ÖÖN Y
==
ÖÖZ \
request
ÖÖ] d
.
ÖÖd e
PhoneNumber
ÖÖe p
)
ÖÖp q
;
ÖÖq r
if
áá 
(
áá 
phone
áá 
==
áá 
null
áá 
||
áá  
phone
áá! &
.
áá& '
OTP
áá' *
!=
áá+ -
request
áá. 5
.
áá5 6
OTP
áá6 9
)
áá9 :
{
àà 
return
ââ 

BadRequest
ââ !
(
ââ! "
$str
ââ" 0
)
ââ0 1
;
ââ1 2
}
ãã 
phone
ëë 
.
ëë 
OTP
ëë 
=
ëë 
null
ëë 
;
ëë 
await
íí 
_context
íí 
.
íí 
SaveChangesAsync
íí +
(
íí+ ,
)
íí, -
;
íí- .
return
îî 
Ok
îî 
(
îî 
new
îî 
{
îî 
Message
îî #
=
îî$ %
$str
îî& B
}
îîC D
)
îîD E
;
îîE F
}
ïï 	
[
óó 
HttpPost
óó 
(
óó 
$str
óó 
)
óó 
]
óó 
public
òò 
async
òò 
Task
òò 
<
òò 
IActionResult
òò '
>
òò' (
SendOTP
òò) 0
(
òò0 1
[
òò1 2
FromBody
òò2 :
]
òò: ;
Phone
òò< A
request
òòB I
)
òòI J
{
ôô 	
if
õõ 
(
õõ 
string
õõ 
.
õõ 
IsNullOrEmpty
õõ $
(
õõ$ %
request
õõ% ,
.
õõ, -
PhoneNumber
õõ- 8
)
õõ8 9
)
õõ9 :
{
úú 
return
ùù 

BadRequest
ùù !
(
ùù! "
$str
ùù" =
)
ùù= >
;
ùù> ?
}
ûû 
string
¢¢ 
otp
¢¢ 
=
¢¢ 
$str
¢¢ !
;
¢¢! "
var
•• 
phone
•• 
=
•• 
await
•• 
_context
•• &
.
••& '
Phonenumber
••' 2
.
••2 3!
FirstOrDefaultAsync
••3 F
(
••F G
p
••G H
=>
••I K
p
••L M
.
••M N
PhoneNumber
••N Y
==
••Z \
request
••] d
.
••d e
PhoneNumber
••e p
)
••p q
;
••q r
if
¶¶ 
(
¶¶ 
phone
¶¶ 
!=
¶¶ 
null
¶¶ 
)
¶¶ 
{
ßß 
phone
®® 
.
®® 
OTP
®® 
=
®® 
otp
®® 
;
®®  
await
©© 
_context
©© 
.
©© 
SaveChangesAsync
©© /
(
©©/ 0
)
©©0 1
;
©©1 2
}
™™ 
return
¨¨ 
Ok
¨¨ 
(
¨¨ 
new
¨¨ 
{
¨¨ 
Message
¨¨ #
=
¨¨$ %
$str
¨¨& >
}
¨¨? @
)
¨¨@ A
;
¨¨A B
}
≠≠ 	
}
ØØ 
}≤≤ ∑p
XC:\Users\amruta\source\repos\AadharVerify\AadharVerify\Controllers\UserDataController.cs
	namespace 	
AadharVerify
 
. 
Controllers "
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
UserDataController #
:$ %
ControllerBase& 4
{ 
private 
readonly 
UserDataDbContext *
_context+ 3
;3 4
public 
UserDataController !
(! "
UserDataDbContext" 3
context4 ;
); <
{ 	
_context 
= 
context 
; 
} 	
[ 	
HttpGet	 
] 
public   
async   
Task   
<   
ActionResult   &
<  & '
IEnumerable  ' 2
<  2 3
Data  3 7
>  7 8
>  8 9
>  9 :
GetDatas  ; C
(  C D
)  D E
{!! 	
if"" 
("" 
_context"" 
."" 
Datas"" 
=="" !
null""" &
)""& '
{## 
return$$ 
NotFound$$ 
($$  
)$$  !
;$$! "
}%% 
return&& 
await&& 
_context&& !
.&&! "
Datas&&" '
.&&' (
ToListAsync&&( 3
(&&3 4
)&&4 5
;&&5 6
}'' 	
[** 	
HttpGet**	 
(** 
$str** 
)** 
]** 
public++ 
async++ 
Task++ 
<++ 
ActionResult++ &
<++& '
Data++' +
>+++ ,
>++, -
GetData++. 5
(++5 6
int++6 9
id++: <
)++< =
{,, 	
if-- 
(-- 
_context-- 
.-- 
Datas-- 
==-- !
null--" &
)--& '
{.. 
return// 
NotFound// 
(//  
)//  !
;//! "
}00 
var11 
data11 
=11 
await11 
_context11 %
.11% &
Datas11& +
.11+ ,
	FindAsync11, 5
(115 6
id116 8
)118 9
;119 :
if33 
(33 
data33 
==33 
null33 
)33 
{44 
return55 
NotFound55 
(55  
)55  !
;55! "
}66 
return88 
data88 
;88 
}99 	
[== 	
HttpPut==	 
(== 
$str== 
)== 
]== 
public>> 
async>> 
Task>> 
<>> 
IActionResult>> '
>>>' (
PutData>>) 0
(>>0 1
int>>1 4
id>>5 7
,>>7 8
Data>>9 =
data>>> B
)>>B C
{?? 	
if@@ 
(@@ 
id@@ 
!=@@ 
data@@ 
.@@ 
Id@@ 
)@@ 
{AA 
returnBB 

BadRequestBB !
(BB! "
)BB" #
;BB# $
}CC 
_contextEE 
.EE 
EntryEE 
(EE 
dataEE 
)EE  
.EE  !
StateEE! &
=EE' (
EntityStateEE) 4
.EE4 5
ModifiedEE5 =
;EE= >
tryGG 
{HH 
awaitII 
_contextII 
.II 
SaveChangesAsyncII /
(II/ 0
)II0 1
;II1 2
}JJ 
catchKK 
(KK (
DbUpdateConcurrencyExceptionKK /
)KK/ 0
{LL 
ifMM 
(MM 
!MM 

DataExistsMM 
(MM  
idMM  "
)MM" #
)MM# $
{NN 
returnOO 
NotFoundOO #
(OO# $
)OO$ %
;OO% &
}PP 
elseQQ 
{RR 
throwSS 
;SS 
}TT 
}UU 
returnWW 
	NoContentWW 
(WW 
)WW 
;WW 
}XX 	
[\\ 	
HttpPost\\	 
]\\ 
public]] 
async]] 
Task]] 
<]] 
ActionResult]] &
<]]& '
Data]]' +
>]]+ ,
>]], -
PostData]]. 6
(]]6 7
Data]]7 ;
data]]< @
)]]@ A
{^^ 	
if__ 
(__ 
_context__ 
.__ 
Datas__ 
==__ !
null__" &
)__& '
{`` 
returnaa 
Problemaa 
(aa 
$straa O
)aaO P
;aaP Q
}bb 
_contextcc 
.cc 
Datascc 
.cc 
Addcc 
(cc 
datacc #
)cc# $
;cc$ %
awaitdd 
_contextdd 
.dd 
SaveChangesAsyncdd +
(dd+ ,
)dd, -
;dd- .
returnff 
CreatedAtActionff "
(ff" #
$strff# ,
,ff, -
newff. 1
{ff2 3
idff4 6
=ff7 8
dataff9 =
.ff= >
Idff> @
}ffA B
,ffB C
dataffD H
)ffH I
;ffI J
}gg 	
[jj 	

HttpDeletejj	 
(jj 
$strjj 
)jj 
]jj 
publickk 
asynckk 
Taskkk 
<kk 
IActionResultkk '
>kk' (

DeleteDatakk) 3
(kk3 4
intkk4 7
idkk8 :
)kk: ;
{ll 	
ifmm 
(mm 
_contextmm 
.mm 
Datasmm 
==mm !
nullmm" &
)mm& '
{nn 
returnoo 
NotFoundoo 
(oo  
)oo  !
;oo! "
}pp 
varqq 
dataqq 
=qq 
awaitqq 
_contextqq %
.qq% &
Datasqq& +
.qq+ ,
	FindAsyncqq, 5
(qq5 6
idqq6 8
)qq8 9
;qq9 :
ifrr 
(rr 
datarr 
==rr 
nullrr 
)rr 
{ss 
returntt 
NotFoundtt 
(tt  
)tt  !
;tt! "
}uu 
_contextww 
.ww 
Datasww 
.ww 
Removeww !
(ww! "
dataww" &
)ww& '
;ww' (
awaitxx 
_contextxx 
.xx 
SaveChangesAsyncxx +
(xx+ ,
)xx, -
;xx- .
returnzz 
	NoContentzz 
(zz 
)zz 
;zz 
}{{ 	
private}} 
bool}} 

DataExists}} 
(}}  
int}}  #
id}}$ &
)}}& '
{~~ 	
return 
( 
_context 
. 
Datas "
?" #
.# $
Any$ '
(' (
e( )
=>* ,
e- .
.. /
Id/ 1
==2 4
id5 7
)7 8
)8 9
.9 :
GetValueOrDefault: K
(K L
)L M
;M N
}
ÄÄ 	
[
ÇÇ 	
HttpPost
ÇÇ	 
(
ÇÇ 
$str
ÇÇ  
)
ÇÇ  !
]
ÇÇ! "
public
ÉÉ 
IActionResult
ÉÉ 
Authenticate
ÉÉ )
(
ÉÉ) *
[
ÉÉ* +
FromBody
ÉÉ+ 3
]
ÉÉ3 4
EmailVerifyDto
ÉÉ5 C
	userLogin
ÉÉD M
)
ÉÉM N
{
ÑÑ 	
var
ÖÖ 
user
ÖÖ 
=
ÖÖ 
_context
ÖÖ 
.
ÖÖ  
Datas
ÖÖ  %
.
ÖÖ% &
FirstOrDefault
ÖÖ& 4
(
ÖÖ4 5
u
ÖÖ5 6
=>
ÖÖ7 9
u
ÖÖ: ;
.
ÖÖ; <
Email
ÖÖ< A
==
ÖÖB D
	userLogin
ÖÖE N
.
ÖÖN O
email
ÖÖO T
)
ÖÖT U
;
ÖÖU V
if
ÜÜ 
(
ÜÜ 
user
ÜÜ 
==
ÜÜ 
null
ÜÜ 
||
ÜÜ 
user
ÜÜ  $
.
ÜÜ$ %
Email
ÜÜ% *
!=
ÜÜ+ -
	userLogin
ÜÜ. 7
.
ÜÜ7 8
email
ÜÜ8 =
)
ÜÜ= >
{
áá 
return
àà 

BadRequest
àà !
(
àà! "
new
àà" %
{
àà& '
success
àà( /
=
àà0 1
false
àà2 7
,
àà7 8
message
àà9 @
=
ààA B
$str
ààC R
}
ààS T
)
ààT U
;
ààU V
}
ââ 
return
ää 
Ok
ää 
(
ää 
new
ää 
{
ää 
success
ää #
=
ää$ %
true
ää& *
,
ää* +
message
ää, 3
=
ää4 5
$str
ää6 P
}
ääQ R
)
ääR S
;
ääS T
}
åå 	
[
ëë 	
HttpGet
ëë	 
(
ëë 
$str
ëë #
)
ëë# $
]
ëë$ %
public
íí 
async
íí 
Task
íí 
<
íí 
ActionResult
íí &
<
íí& '
Data
íí' +
>
íí+ ,
>
íí, -$
GetVerifiedUserByEmail
íí. D
(
ííD E
[
ííE F
	FromRoute
ííF O
]
ííO P
string
ííQ W
email
ííX ]
)
íí] ^
{
ìì 	
var
îî 
verifiedUser
îî 
=
îî 
await
îî $
_context
îî% -
.
îî- .
Datas
îî. 3
.
ïï !
FirstOrDefaultAsync
ïï $
(
ïï$ %
u
ïï% &
=>
ïï' )
u
ïï* +
.
ïï+ ,
Email
ïï, 1
==
ïï2 4
email
ïï5 :
)
ïï: ;
;
ïï; <
if
óó 
(
óó 
verifiedUser
óó 
==
óó 
null
óó  $
)
óó$ %
{
òò 
return
ôô 
NotFound
ôô 
(
ôô  
)
ôô  !
;
ôô! "
}
öö 
return
úú 
verifiedUser
úú 
;
úú  
}
ùù 	
[
üü 	
HttpGet
üü	 
(
üü 
$str
üü .
)
üü. /
]
üü/ 0
public
†† 
IActionResult
†† '
CheckPassportNumberExists
†† 6
(
††6 7
[
††7 8
	FromRoute
††8 A
]
††A B
string
††C I
aadharNumber
††J V
)
††V W
{
°° 	
try
¢¢ 
{
££ 
var
§§ 
exists
§§ 
=
§§ 
_context
§§ %
.
§§% &
Datas
§§& +
.
§§+ ,
Any
§§, /
(
§§/ 0
u
§§0 1
=>
§§2 4
u
§§5 6
.
§§6 7
AadharNumber
§§7 C
==
§§D F
aadharNumber
§§G S
)
§§S T
;
§§T U
if
•• 
(
•• 
exists
•• 
)
•• 
return
¶¶ 
Ok
¶¶ 
(
¶¶ 
exists
¶¶  
)
¶¶  !
;
¶¶! "
else
ßß 
return
ßß 

BadRequest
ßß &
(
ßß& '
new
ßß' *
{
ßß+ ,
success
ßß- 4
=
ßß5 6
false
ßß7 <
}
ßß= >
)
ßß> ?
;
ßß? @
}
®® 
catch
©© 
(
©© 
	Exception
©© 
ex
©© 
)
©©  
{
™™ 
Console
¨¨ 
.
¨¨ 
	WriteLine
¨¨ !
(
¨¨! "
$"
¨¨" $
$str
¨¨$ D
{
¨¨D E
ex
¨¨E G
.
¨¨G H
Message
¨¨H O
}
¨¨O P
"
¨¨P Q
)
¨¨Q R
;
¨¨R S
return
≠≠ 

StatusCode
≠≠ !
(
≠≠! "
$num
≠≠" %
,
≠≠% &
$str
≠≠' >
)
≠≠> ?
;
≠≠? @
}
ÆÆ 
}
ØØ 	
[
≤≤ 	
HttpGet
≤≤	 
(
≤≤ 
$str
≤≤ +
)
≤≤+ ,
]
≤≤, -
public
≥≥ 
async
≥≥ 
Task
≥≥ 
<
≥≥ 
ActionResult
≥≥ &
<
≥≥& '
Data
≥≥' +
>
≥≥+ ,
>
≥≥, -%
GetVerifiedUserByAadhar
≥≥. E
(
≥≥E F
[
≥≥F G
	FromRoute
≥≥G P
]
≥≥P Q
string
≥≥R X
aadharNumber
≥≥Y e
)
≥≥e f
{
¥¥ 	
var
µµ 
verifiedUser
µµ 
=
µµ 
await
µµ $
_context
µµ% -
.
µµ- .
Datas
µµ. 3
.
∂∂ !
FirstOrDefaultAsync
∂∂ $
(
∂∂$ %
u
∂∂% &
=>
∂∂' )
u
∂∂* +
.
∂∂+ ,
AadharNumber
∂∂, 8
==
∂∂9 ;
aadharNumber
∂∂< H
)
∂∂H I
;
∂∂I J
if
∏∏ 
(
∏∏ 
verifiedUser
∏∏ 
==
∏∏ 
null
∏∏  $
)
∏∏$ %
{
ππ 
return
∫∫ 
NotFound
∫∫ 
(
∫∫  
)
∫∫  !
;
∫∫! "
}
ªª 
return
ΩΩ 
verifiedUser
ΩΩ 
;
ΩΩ  
}
ææ 	
[
øø 	
HttpGet
øø	 
(
øø 
$str
øø 
)
øø 
]
øø 
public
¿¿ 
async
¿¿ 
Task
¿¿ 
<
¿¿ 
ActionResult
¿¿ &
<
¿¿& '
Data
¿¿' +
>
¿¿+ ,
>
¿¿, -
Getid
¿¿. 3
(
¿¿3 4
[
¿¿4 5
	FromRoute
¿¿5 >
]
¿¿> ?
int
¿¿? B
id
¿¿C E
)
¿¿E F
{
¡¡ 	
var
¬¬ 
verifiedUser
¬¬ 
=
¬¬ 
await
¬¬ $
_context
¬¬% -
.
¬¬- .
Datas
¬¬. 3
.
√√ !
FirstOrDefaultAsync
√√ $
(
√√$ %
u
√√% &
=>
√√' )
u
√√* +
.
√√+ ,
Id
√√, .
==
√√/ 1
id
√√2 4
)
√√4 5
;
√√5 6
if
≈≈ 
(
≈≈ 
verifiedUser
≈≈ 
==
≈≈ 
null
≈≈  $
)
≈≈$ %
{
∆∆ 
return
«« 
NotFound
«« 
(
««  
)
««  !
;
««! "
}
»» 
return
   
verifiedUser
   
;
    
}
ÀÀ 	
}
ÕÕ 
}ŒŒ ü
XC:\Users\amruta\source\repos\AadharVerify\AadharVerify\Controllers\UserListController.cs
	namespace 	
AadharVerify
 
. 
Controllers "
{		 
[ 	
Route	 
( 
$str !
)! "
]" #
[ 	
ApiController	 
] 
public 
class 
UserListController '
:( )
ControllerBase* 8
{ 	
private 
readonly 
IConfiguration +
_configuration, :
;: ;
private 
readonly 
UserDataDbContext .

_dbContext/ 9
;9 :
public 
UserListController %
(% &
IConfiguration& 4
configuration5 B
,B C
UserDataDbContextD U
	dbContextV _
)_ `
{ 
_configuration 
=  
configuration! .
;. /

_dbContext 
= 
	dbContext &
;& '
} 
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
IActionResult  
Login! &
(& '
string' -
email. 3
,3 4
string5 ;
password< D
)D E
{ 
var 
user 
= 

_dbContext %
.% &
	UsersList& /
./ 0
FirstOrDefault0 >
(> ?
u? @
=>A C
uD E
.E F
EmailF K
==L N
emailO T
&&U W
uX Y
.Y Z
PasswordZ b
==c e
passwordf n
)n o
;o p
if   
(   
user   
!=   
null    
)    !
{!! 
var"" 
jwt"" 
="" 
new"" !
JWT""" %
(""% &
_configuration""& 4
[""4 5
$str""5 >
]""> ?
,""? @
_configuration""A O
[""O P
$str""P ^
]""^ _
)""_ `
;""` a
var## 
token## 
=## 
jwt##  #
.### $
GenerateToken##$ 1
(##1 2
user##2 6
)##6 7
;##7 8
var%% 
response%% 
=%% 
new%% "
ResponseDTO%%# .
{&& 
token'' 
='' 
token'' !
,''! "
role(( 
=(( 
user(( 
.((  
UserType((  (
})) 
;)) 
return** 
Ok** 
(** 
response** &
)**& '
;**' (
}++ 
return-- 
Unauthorized-- #
(--# $
$str--$ 9
)--9 :
;--: ;
}.. 
}00 	
}11 ∫
MC:\Users\amruta\source\repos\AadharVerify\AadharVerify\Dto\AadharVerifyDto.cs
	namespace 	
AadharVerify
 
. 
Dto 
{ 
public 

class 
AadharVerifyDto  
{ 
public 
string 
aadharNumber &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
} 
}

 »
LC:\Users\amruta\source\repos\AadharVerify\AadharVerify\Dto\EmailVerifyDto.cs
	namespace 	
AadharVerify
 
. 
Dto 
{ 
public 

class 
EmailVerifyDto 
{ 
public 
string 
email 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Otp 
{ 
get  
;  !
set" %
;% &
}' (
}		 
}

 ù
NC:\Users\amruta\source\repos\AadharVerify\AadharVerify\Helper\EmailSettings.cs
	namespace 	
AadharVerify
 
. 
Helper 
{ 
public 

class 
EmailSettings 
{ 
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Password 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
Host 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Displayname !
{" #
get$ '
;' (
set) ,
;, -
}. /
public		 
int		 
Port		 
{		 
get		 
;		 
set		 "
;		" #
}		$ %
}

 
} Ê
LC:\Users\amruta\source\repos\AadharVerify\AadharVerify\Helper\Mailrequest.cs
	namespace 	
AadharVerify
 
. 
Helper 
{ 
public 

class 
Mailrequest 
{ 
public 
string 
ToEmail 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Subject 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
Body 
{ 
get  
;  !
set" %
;% &
}' (
} 
}		 ˛
XC:\Users\amruta\source\repos\AadharVerify\AadharVerify\Migrations\20231130143440_init.cs
	namespace 	
AadharVerify
 
. 

Migrations !
{ 
public 

partial 
class 
init 
: 
	Migration  )
{		 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str 
, 
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
int& )
>) *
(* +
type+ /
:/ 0
$str1 6
,6 7
nullable8 @
:@ A
falseB G
)G H
. 

Annotation #
(# $
$str$ 8
,8 9
$str: @
)@ A
,A B
	FirstName 
= 
table  %
.% &
Column& ,
<, -
string- 3
>3 4
(4 5
type5 9
:9 :
$str; I
,I J
nullableK S
:S T
falseU Z
)Z [
,[ \
LastName 
= 
table $
.$ %
Column% +
<+ ,
string, 2
>2 3
(3 4
type4 8
:8 9
$str: H
,H I
nullableJ R
:R S
falseT Y
)Y Z
,Z [
Age 
= 
table 
.  
Column  &
<& '
int' *
>* +
(+ ,
type, 0
:0 1
$str2 7
,7 8
nullable9 A
:A B
falseC H
)H I
,I J
Address 
= 
table #
.# $
Column$ *
<* +
string+ 1
>1 2
(2 3
type3 7
:7 8
$str9 H
,H I
nullableJ R
:R S
falseT Y
)Y Z
,Z [
Phone 
= 
table !
.! "
Column" (
<( )
string) /
>/ 0
(0 1
type1 5
:5 6
$str7 F
,F G
nullableH P
:P Q
falseR W
)W X
,X Y
AadharNumber  
=! "
table# (
.( )
Column) /
</ 0
string0 6
>6 7
(7 8
type8 <
:< =
$str> M
,M N
nullableO W
:W X
falseY ^
)^ _
,_ `
Email 
= 
table !
.! "
Column" (
<( )
string) /
>/ 0
(0 1
type1 5
:5 6
$str7 F
,F G
nullableH P
:P Q
falseR W
)W X
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% /
,/ 0
x1 2
=>3 5
x6 7
.7 8
Id8 :
): ;
;; <
} 
) 
; 
} 	
	protected"" 
override"" 
void"" 
Down""  $
(""$ %
MigrationBuilder""% 5
migrationBuilder""6 F
)""F G
{## 	
migrationBuilder$$ 
.$$ 
	DropTable$$ &
($$& '
name%% 
:%% 
$str%% 
)%% 
;%% 
}&& 	
}'' 
}(( ˙
YC:\Users\amruta\source\repos\AadharVerify\AadharVerify\Migrations\20231202081628_init1.cs
	namespace 	
AadharVerify
 
. 

Migrations !
{ 
public 

partial 
class 
init1 
:  
	Migration! *
{		 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str "
," #
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
int& )
>) *
(* +
type+ /
:/ 0
$str1 6
,6 7
nullable8 @
:@ A
falseB G
)G H
. 

Annotation #
(# $
$str$ 8
,8 9
$str: @
)@ A
,A B
FileContent 
=  !
table" '
.' (
Column( .
<. /
byte/ 3
[3 4
]4 5
>5 6
(6 7
type7 ;
:; <
$str= M
,M N
nullableO W
:W X
falseY ^
)^ _
,_ `
UserId 
= 
table "
." #
Column# )
<) *
int* -
>- .
(. /
type/ 3
:3 4
$str5 :
,: ;
nullable< D
:D E
falseF K
)K L
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 4
,4 5
x6 7
=>8 :
x; <
.< =
Id= ?
)? @
;@ A
table 
. 

ForeignKey $
($ %
name 
: 
$str :
,: ;
column 
: 
x  !
=>" $
x% &
.& '
UserId' -
,- .
principalTable &
:& '
$str( /
,/ 0
principalColumn '
:' (
$str) -
,- .
onDelete  
:  !
ReferentialAction" 3
.3 4
Cascade4 ;
); <
;< =
} 
) 
; 
migrationBuilder!! 
.!! 
CreateIndex!! (
(!!( )
name"" 
:"" 
$str"" ,
,"", -
table## 
:## 
$str## #
,### $
column$$ 
:$$ 
$str$$  
)$$  !
;$$! "
}%% 	
	protected(( 
override(( 
void(( 
Down((  $
((($ %
MigrationBuilder((% 5
migrationBuilder((6 F
)((F G
{)) 	
migrationBuilder** 
.** 
	DropTable** &
(**& '
name++ 
:++ 
$str++ "
)++" #
;++# $
},, 	
}-- 
}.. ∑
YC:\Users\amruta\source\repos\AadharVerify\AadharVerify\Migrations\20231214062151_init3.cs
	namespace 	
AadharVerify
 
. 

Migrations !
{ 
public 

partial 
class 
init3 
:  
	Migration! *
{		 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str !
,! "
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
int& )
>) *
(* +
type+ /
:/ 0
$str1 6
,6 7
nullable8 @
:@ A
falseB G
)G H
. 

Annotation #
(# $
$str$ 8
,8 9
$str: @
)@ A
,A B
Email 
= 
table !
.! "
Column" (
<( )
string) /
>/ 0
(0 1
type1 5
:5 6
$str7 F
,F G
nullableH P
:P Q
falseR W
)W X
,X Y
Password 
= 
table $
.$ %
Column% +
<+ ,
string, 2
>2 3
(3 4
type4 8
:8 9
$str: I
,I J
nullableK S
:S T
falseU Z
)Z [
,[ \
UserType 
= 
table $
.$ %
Column% +
<+ ,
string, 2
>2 3
(3 4
type4 8
:8 9
$str: I
,I J
nullableK S
:S T
falseU Z
)Z [
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 3
,3 4
x5 6
=>7 9
x: ;
.; <
Id< >
)> ?
;? @
} 
) 
; 
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder   
.   
	DropTable   &
(  & '
name!! 
:!! 
$str!! !
)!!! "
;!!" #
}"" 	
}## 
}$$ Ó
YC:\Users\amruta\source\repos\AadharVerify\AadharVerify\Migrations\20231215125716_init5.cs
	namespace 	
AadharVerify
 
. 

Migrations !
{ 
public 

partial 
class 
init5 
:  
	Migration! *
{		 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
} 	
} 
} ∑
YC:\Users\amruta\source\repos\AadharVerify\AadharVerify\Migrations\20231215130551_init6.cs
	namespace 	
AadharVerify
 
. 

Migrations !
{ 
public 

partial 
class 
init6 
:  
	Migration! *
{		 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str 
, 
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
int& )
>) *
(* +
type+ /
:/ 0
$str1 6
,6 7
nullable8 @
:@ A
falseB G
)G H
. 

Annotation #
(# $
$str$ 8
,8 9
$str: @
)@ A
,A B
Email 
= 
table !
.! "
Column" (
<( )
string) /
>/ 0
(0 1
type1 5
:5 6
$str7 F
,F G
nullableH P
:P Q
falseR W
)W X
,X Y
Password 
= 
table $
.$ %
Column% +
<+ ,
string, 2
>2 3
(3 4
type4 8
:8 9
$str: I
,I J
nullableK S
:S T
falseU Z
)Z [
,[ \
UserType 
= 
table $
.$ %
Column% +
<+ ,
string, 2
>2 3
(3 4
type4 8
:8 9
$str: I
,I J
nullableK S
:S T
falseU Z
)Z [
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 0
,0 1
x2 3
=>4 6
x7 8
.8 9
Id9 ;
); <
;< =
} 
) 
; 
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder   
.   
	DropTable   &
(  & '
name!! 
:!! 
$str!! 
)!! 
;!!  
}"" 	
}## 
}$$ ’
YC:\Users\amruta\source\repos\AadharVerify\AadharVerify\Migrations\20231226121446_init7.cs
	namespace 	
AadharVerify
 
. 

Migrations !
{ 
public 

partial 
class 
init7 
:  
	Migration! *
{		 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str #
,# $
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
int& )
>) *
(* +
type+ /
:/ 0
$str1 6
,6 7
nullable8 @
:@ A
falseB G
)G H
. 

Annotation #
(# $
$str$ 8
,8 9
$str: @
)@ A
,A B
PhoneNumber 
=  !
table" '
.' (
Column( .
<. /
string/ 5
>5 6
(6 7
type7 ;
:; <
$str= L
,L M
nullableN V
:V W
falseX ]
)] ^
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 5
,5 6
x7 8
=>9 ;
x< =
.= >
Id> @
)@ A
;A B
} 
) 
; 
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 
	DropTable &
(& '
name 
: 
$str #
)# $
;$ %
}   	
}!! 
}"" ¬
YC:\Users\amruta\source\repos\AadharVerify\AadharVerify\Migrations\20231228064556_init8.cs
	namespace 	
AadharVerify
 
. 

Migrations !
{ 
public 

partial 
class 
init8 
:  
	Migration! *
{		 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
	AddColumn &
<& '
string' -
>- .
(. /
name 
: 
$str 
, 
table 
: 
$str $
,$ %
type 
: 
$str %
,% &
nullable 
: 
false 
,  
defaultValue 
: 
$str  
)  !
;! "
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 

DropColumn '
(' (
name 
: 
$str 
, 
table 
: 
$str $
)$ %
;% &
} 	
} 
} Ï
XC:\Users\amruta\source\repos\AadharVerify\AadharVerify\Migrations\20240105083840_inti.cs
	namespace 	
AadharVerify
 
. 

Migrations !
{ 
public 

partial 
class 
inti 
: 
	Migration  )
{		 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
} 	
} 
} ˙
EC:\Users\amruta\source\repos\AadharVerify\AadharVerify\Models\Data.cs
public 
class 
Data 
{ 
public 

int 
Id 
{ 
get 
; 
set 
; 
} 
[

 
Column

 
(

 
TypeName

 
=

 
$str

 %
)

% &
]

& '
public 

string 
	FirstName 
{ 
get !
;! "
set# &
;& '
}( )
[ 
Column 
( 
TypeName 
= 
$str %
)% &
]& '
public 

string 
LastName 
{ 
get  
;  !
set" %
;% &
}' (
public 

int 
Age 
{ 
get 
; 
set 
; 
}  
[ 
Column 
( 
TypeName 
= 
$str &
)& '
]' (
public 

string 
Address 
{ 
get 
;  
set! $
;$ %
}& '
public 

string 
Phone 
{ 
get 
; 
set "
;" #
}$ %
public 

string 
AadharNumber 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 

string 
Email 
{ 
get 
; 
set "
;" #
}$ %
} ë
KC:\Users\amruta\source\repos\AadharVerify\AadharVerify\Models\ImageProof.cs
	namespace 	
AadharVerify
 
. 
Models 
{ 
public 

class 

ImageProof 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
byte 
[ 
] 
FileContent !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
int 
UserId 
{ 
get 
;  
set! $
;$ %
}& '
public		 
Data		 
User		 
{		 
get		 
;		 
set		  #
;		# $
}		% &
}

 
} ö
DC:\Users\amruta\source\repos\AadharVerify\AadharVerify\Models\JWT.cs
	namespace 	
AadharVerify
 
. 
Models 
{

 
public 

class 
JWT 
{ 
public 
JWT 
( 
string 
? 
Key 
, 
string  &
?& '
Duration( 0
)0 1
{ 	
this 
. 
Key 
= 
Key 
?? 
$str  
;  !
this 
. 
Duration 
= 
Duration $
??% '
$str( *
;* +
} 	
public 
string 
Key 
{ 
get 
;  
set! $
;$ %
}& '
public 
string 
Duration 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
GenerateToken #
(# $
Users$ )
user* .
). /
{!! 	
var## 
key## 
=## 
new##  
SymmetricSecurityKey## .
(##. /
Encoding##/ 7
.##7 8
UTF8##8 <
.##< =
GetBytes##= E
(##E F
this##F J
.##J K
Key##K N
)##N O
)##O P
;##P Q
var%% 
credentials%% 
=%% 
new%% !
SigningCredentials%%" 4
(%%4 5
key%%5 8
,%%8 9
SecurityAlgorithms%%: L
.%%L M

HmacSha256%%M W
)%%W X
;%%X Y
var'' 
claims'' 
='' 
new'' 
['' 
]'' 
{)) 
new++ 
Claim++ 
(++ 
$str++ 
,++ 
user++  $
.++$ %
Id++% '
.++' (
ToString++( 0
(++0 1
)++1 2
)++2 3
,++3 4
new.. 
Claim.. 
(.. 
$str.. !
,..! "
user..# '
...' (
Email..( -
)..- .
,... /
new00 
Claim00 
(00 
$str00 $
,00$ %
user00& *
.00* +
Password00+ 3
)003 4
,004 5
new22 
Claim22 
(22 
$str22 #
,22# $
user22% )
.22) *
UserType22* 2
)222 3
}44 
;44 
var66 
jwtToken66 
=66 
new66 
JwtSecurityToken66 /
(66/ 0
issuer88 
:88 
$str88 "
,88" #
audience:: 
::: 
$str:: $
,::$ %
claims<< 
:<< 
claims<< 
,<< 
expires>> 
:>> 
DateTime>>  
.>>  !
Now>>! $
.>>$ %

AddMinutes>>% /
(>>/ 0
Int32>>0 5
.>>5 6
Parse>>6 ;
(>>; <
this>>< @
.>>@ A
Duration>>A I
)>>I J
)>>J K
,>>K L
signingCredentials@@ !
:@@! "
credentials@@# .
)BB 
;BB 
returnDD 
newDD #
JwtSecurityTokenHandlerDD .
(DD. /
)DD/ 0
.DD0 1

WriteTokenDD1 ;
(DD; <
jwtTokenDD< D
)DDD E
;DDE F
}FF 	
}HH 
}JJ ˘
VC:\Users\amruta\source\repos\AadharVerify\AadharVerify\Models\NewFolder\ResponseDTO.cs
	namespace 	
AadharVerify
 
. 
Models 
. 
	NewFolder '
{ 
public 

class 
ResponseDTO 
{ 
public 
string 
token 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
role 
{ 
get  
;  !
set" %
;% &
}' (
} 
} ∏
FC:\Users\amruta\source\repos\AadharVerify\AadharVerify\Models\Phone.cs
	namespace 	
AadharVerify
 
. 
Models 
{ 
public 

class 
Phone 
{ 
[ 	
Key	 
] 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
[		 	
Required			 
]		 
public

 
string

 
PhoneNumber

 !
{

" #
get

$ '
;

' (
set

) ,
;

, -
}

. /
public 
string 
OTP 
{ 
get 
;  
set! $
;$ %
}& '
} 
} Ω
GC:\Users\amruta\source\repos\AadharVerify\AadharVerify\Models\Sample.cs
	namespace 	
AadharVerify
 
. 
Models 
{ 
public 

class 
Sample 
{ 
[ 	
Key	 
] 
[ 	
Required	 
] 
public		 
int		 
Id		 
{		 
get		 
;		 
set		  
;		  !
}		" #
[

 	
Required

	 
]

 
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
[ 	
Required	 
] 
public 
string 
Password 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
UserType 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} 
FC:\Users\amruta\source\repos\AadharVerify\AadharVerify\Models\Users.cs
	namespace 	
AadharVerify
 
. 
Models 
{ 
public 

class 
Users 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Password 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
UserType 
{  
get! $
;$ %
set& )
;) *
}+ ,
}		 
}

 Î
PC:\Users\amruta\source\repos\AadharVerify\AadharVerify\OtpVerificationRequest.cs
public 
class "
OtpVerificationRequest #
{ 
public 

string 
PhoneNumber 
{ 
get  #
;# $
set% (
;( )
}* +
public 

string 
Otp 
{ 
get 
; 
set  
;  !
}" #
} ¸(
AC:\Users\amruta\source\repos\AadharVerify\AadharVerify\Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
builder 
. 
Services 
. 
	Configure 
< 
EmailSettings (
>( )
() *
builder* 1
.1 2
Configuration2 ?
.? @

GetSection@ J
(J K
$strK Z
)Z [
)[ \
;\ ]
builder 
. 
Services 
. 
AddTransient 
< 
IEmailService +
,+ ,
EmailService- 9
>9 :
(: ;
); <
;< =
builder 
. 
Services 
. 
AddCors 
( 
options  
=>! #
{ 
options 
. 
	AddPolicy 
( 
$str +
,+ ,
builder- 4
=>5 7
{ 
builder 
. 
WithOrigins 
( 
$str 3
)3 4
. 
AllowAnyHeader 
( 
)  
. 
AllowAnyMethod 
( 
)  
.   
AllowAnyOrigin   
(   
)    
;    !
}!! 
)!! 
;!! 
}"" 
)"" 
;"" 
builder&& 
.&& 
Services&& 
.&& 
AddDbContext&& 
<&& 
UserDataDbContext&& /
>&&/ 0
(&&0 1
x&&1 2
=>&&3 5
x&&6 7
.&&7 8
UseSqlServer&&8 D
(&&D E
builder&&E L
.&&L M
Configuration&&M Z
.&&Z [
GetConnectionString&&[ n
(&&n o
$str&&o v
)&&v w
)&&w x
)&&x y
;&&y z
builder'' 
.'' 
Services'' 
.'' 
AddControllers'' 
(''  
)''  !
;''! "
builder(( 
.(( 
Services(( 
.(( 
	AddScoped(( 
<(( 

OtpService(( %
>((% &
(((& '
)((' (
;((( )
builder)) 
.)) 
Services)) 
.)) 
AddAuthentication)) "
())" #
JwtBearerDefaults))# 4
.))4 5 
AuthenticationScheme))5 I
)))I J
.))J K
AddJwtBearer))K W
())W X
x))X Y
=>))Z \
{** 
x++ 
.++ %
TokenValidationParameters++ 
=++  !
new++" %%
TokenValidationParameters++& ?
{,, 
ValidateIssuer-- 
=-- 
true-- 
,-- 
ValidateAudience.. 
=.. 
true.. 
,..  
ValidateLifetime// 
=// 
true// 
,//  $
ValidateIssuerSigningKey00  
=00! "
true00# '
,00' (
ValidIssuer11 
=11 
$str11 !
,11! "
ValidAudience22 
=22 
$str22 #
,22# $
IssuerSigningKey33 
=33 
new33  
SymmetricSecurityKey33 3
(333 4
Encoding334 <
.33< =
UTF833= A
.33A B
GetBytes33B J
(33J K
builder33K R
.33R S
Configuration33S `
[33` a
$str33a j
]33j k
)33k l
)33l m
,33m n
	ClockSkew44 
=44 
TimeSpan44 
.44 
Zero44 !
}55 
;55 
}66 
)66 
;66 
builder88 
.88 
Services88 
.88 
AddHttpClient88 
(88 
)88  
;88  !
builder99 
.99 
Services99 
.99 #
AddEndpointsApiExplorer99 (
(99( )
)99) *
;99* +
builder:: 
.:: 
Services:: 
.:: 
AddSwaggerGen:: 
(:: 
)::  
;::  !
var;; 
app;; 
=;; 	
builder;;
 
.;; 
Build;; 
(;; 
);; 
;;; 
appBB 
.BB 

UseSwaggerBB 
(BB 
)BB 
;BB 
appCC 
.CC 
UseSwaggerUICC 
(CC 
cCC 
=>CC 
cCC 
.CC 
SwaggerEndpointCC '
(CC' (
$strCC( B
,CCB C
$strCCD d
)CCd e
)CCe f
;CCf g
appFF 
.FF 
UseCorsFF 
(FF 
$strFF !
)FF! "
;FF" #
appII 
.II 
UseAuthorizationII 
(II 
)II 
;II 
appKK 
.KK 
MapControllersKK 
(KK 
)KK 
;KK 
appMM 
.MM 
RunMM 
(MM 
)MM 	
;MM	 
ô
OC:\Users\amruta\source\repos\AadharVerify\AadharVerify\Services\EmailService.cs
	namespace 	
AadharVerify
 
. 
Services 
{ 
public		 
class		 
EmailService		 !
:		" #
IEmailService		$ 1
{

 	
private 
readonly 
EmailSettings *
emailSettings+ 8
;8 9
public 
EmailService 
(  
IOptions  (
<( )
EmailSettings) 6
>6 7
options8 ?
)? @
{ 
this 
. 
emailSettings "
=# $
options% ,
., -
Value- 2
;2 3
} 
public 
async 
Task 
SendEmailAsync ,
(, -
Mailrequest- 8
mailrequest9 D
)D E
{ 
var 
email 
= 
new 
MimeMessage  +
(+ ,
), -
;- .
email 
. 
Sender 
= 
MailboxAddress -
.- .
Parse. 3
(3 4
emailSettings4 A
.A B
EmailB G
)G H
;H I
email 
. 
To 
. 
Add 
( 
MailboxAddress +
.+ ,
Parse, 1
(1 2
mailrequest2 =
.= >
ToEmail> E
)E F
)F G
;G H
email 
. 
Subject 
= 
mailrequest  +
.+ ,
Subject, 3
;3 4
var 
builder 
= 
new !
BodyBuilder" -
(- .
). /
;/ 0
builder 
. 
HtmlBody  
=! "
mailrequest# .
.. /
Body/ 3
;3 4
email 
. 
Body 
= 
builder $
.$ %
ToMessageBody% 2
(2 3
)3 4
;4 5
using 
var 
smtp 
=  
new! $

SmtpClient% /
(/ 0
)0 1
;1 2
smtp 
. 
Connect 
( 
emailSettings *
.* +
Host+ /
,/ 0
emailSettings1 >
.> ?
Port? C
,C D
SecureSocketOptionsE X
.X Y
StartTlsY a
)a b
;b c
smtp 
. 
Authenticate !
(! "
emailSettings" /
./ 0
Email0 5
,5 6
emailSettings7 D
.D E
PasswordE M
)M N
;N O
await   
smtp   
.   
	SendAsync   $
(  $ %
email  % *
)  * +
;  + ,
smtp!! 
.!! 

Disconnect!! 
(!!  
true!!  $
)!!$ %
;!!% &
}"" 
}## 	
}$$ ±
PC:\Users\amruta\source\repos\AadharVerify\AadharVerify\Services\IEmailService.cs
	namespace 	
AadharVerify
 
. 
Services 
{ 
public 

	interface 
IEmailService "
{ 
Task 
SendEmailAsync 
( 
Mailrequest '
mailrequest( 3
)3 4
;4 5
} 
}		 ¨
MC:\Users\amruta\source\repos\AadharVerify\AadharVerify\Services\OtpService.cs
	namespace 	
AadharVerify
 
. 
Services 
{ 
public 

class 

OtpService 
{		 
private

 
readonly

 
UserDataDbContext

 *

_dbContext

+ 5
;

5 6
public 

OtpService 
( 
UserDataDbContext +
	dbContext, 5
)5 6
{ 	

_dbContext 
= 
	dbContext "
??# %
throw& +
new, /!
ArgumentNullException0 E
(E F
nameofF L
(L M
	dbContextM V
)V W
)W X
;X Y
} 	
public 
string 
GenerateOtp !
(! "
string" (
phoneNumber) 4
)4 5
{ 	
using 
( 
var !
cryptoServiceProvider ,
=- .
new/ 2
System3 9
.9 :
Security: B
.B C
CryptographyC O
.O P$
RNGCryptoServiceProviderP h
(h i
)i j
)j k
{ 
var 
randomNumber  
=! "
new# &
byte' +
[+ ,
$num, -
]- .
;. /!
cryptoServiceProvider %
.% &
GetBytes& .
(. /
randomNumber/ ;
); <
;< =
int 
	otpNumber 
= 
BitConverter  ,
., -
ToInt32- 4
(4 5
randomNumber5 A
,A B
$numC D
)D E
%F G
$numH N
+O P
$numQ W
;W X
string 
otp 
= 
	otpNumber &
.& '
ToString' /
(/ 0
$str0 4
)4 5
;5 6
SaveOtpRecord 
( 
new !
Phone" '
{ 
PhoneNumber 
=  !
phoneNumber" -
,- .
OTP 
= 
otp 
} 
) 
; 
return!! 
otp!! 
;!! 
}"" 
}## 	
public%% 
void%% 
SaveOtpRecord%% !
(%%! "
Phone%%" '
phone%%( -
)%%- .
{&& 	

_dbContext'' 
.'' 
Phonenumber'' "
.''" #
Add''# &
(''& '
phone''' ,
)'', -
;''- .

_dbContext(( 
.(( 
SaveChanges(( "
(((" #
)((# $
;(($ %
})) 	
public++ 
bool++ 
	VerifyOtp++ 
(++ 
string++ $
phoneNumber++% 0
,++0 1
string++2 8

enteredOtp++9 C
)++C D
{,, 	
Phone-- 
	otpRecord-- 
=-- 

_dbContext-- (
.--( )
Phonenumber--) 4
... 
Where.. 
(.. 
record.. 
=>..  
record..! '
...' (
PhoneNumber..( 3
==..4 6
phoneNumber..7 B
)..B C
.// 
OrderByDescending// "
(//" #
record//# )
=>//* ,
record//- 3
.//3 4
Id//4 6
)//6 7
.00 
FirstOrDefault00 
(00  
)00  !
;00! "
return22 
	otpRecord22 
!=22 
null22  $
&&22% '
string22( .
.22. /
Equals22/ 5
(225 6
	otpRecord226 ?
.22? @
OTP22@ C
,22C D

enteredOtp22E O
,22O P
StringComparison22Q a
.22a b
Ordinal22b i
)22i j
;22j k
}33 	
}44 
}55 ¸
KC:\Users\amruta\source\repos\AadharVerify\AadharVerify\UserDataDbContext.cs
	namespace 	
AadharVerify
 
. 
Models 
{ 
public 

class 
UserDataDbContext "
:" #
	DbContext# ,
{

 
public 
UserDataDbContext  
(  !
DbContextOptions! 1
<1 2
UserDataDbContext2 C
>C D
optionsE L
)L M
: 
base 
( 
options 
) 
{ 	
} 	
public 
DbSet 
< 
Data 
> 
Datas  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
DbSet 
< 
Users 
> 
	UsersList %
{& '
get( +
;+ ,
set, /
;/ 0
}1 2
public 
DbSet 
< 
Phone 
> 
Phonenumber '
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
DbSet 
< 

ImageProof 
>  

ImageProof! +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
=: ;
default< C
!C D
;D E
public 
DbSet 
< 
Sample 
> 
Sample #
{$ %
get& )
;) *
set+ .
;. /
}0 1
=2 3
default4 ;
!; <
;< =
} 
} ﬁ
IC:\Users\amruta\source\repos\AadharVerify\AadharVerify\WeatherForecast.cs
	namespace 	
AadharVerify
 
{ 
public 

class 
WeatherForecast  
{ 
public 
DateOnly 
Date 
{ 
get "
;" #
set$ '
;' (
}) *
public 
int 
TemperatureC 
{  !
get" %
;% &
set' *
;* +
}, -
public		 
int		 
TemperatureF		 
=>		  "
$num		# %
+		& '
(		( )
int		) ,
)		, -
(		- .
TemperatureC		. :
/		; <
$num		= C
)		C D
;		D E
public 
string 
? 
Summary 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} 